"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2140],{82140:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{BW:function(){return unslugify},FC:function(){return formatOtherInclusions},Gu:function(){return formatInclusions},Hq:function(){return generateRandomNumber},Jv:function(){return getNearbyProducts},OF:function(){return isOverflown},U4:function(){return generateDefaultPrefrence},YD:function(){return popupCenter},gY:function(){return generateUniqueFileName},ix:function(){return generateHotelOptions},lV:function(){return slugify},og:function(){return format_Phone_No},pj:function(){return applyAccomodationPrefrence},rb:function(){return findRoomCombinations},uO:function(){return parseJsonString},uT:function(){return setVisitedCookie},uf:function(){return formatNumber},yT:function(){return withWindowSize}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85893),_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(53068),axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__),moment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(30381),moment__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__),js_cookie__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(31955),next_auth_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(33299),next_auth_react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_5__),_api__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(69941),_constants__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(60378);let unslugify=t=>{for(var o=t.split("-"),n=0;n<o.length;n++){var a=o[n];o[n]=a.charAt(0).toUpperCase()+a.slice(1)}return o.join(" ")},slugify=function(t,o){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return"string"!=typeof t?"":"lower-case"===o?t.replace(/ /g,n).toLowerCase():"upper-case"===o?t.replace(/ /g,n).toUpperCase():t.replace(/ /g,n)},isOverflown=t=>{let{clientWidth:o,clientHeight:n,scrollWidth:a,scrollHeight:i}=t||{clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0};return i>n||a>o},formatInclusions=t=>!t||t.includes("{")?[]:Array.isArray(t)?t:t.split(","),formatOtherInclusions=string=>{try{return eval(string)}catch(e){return string.split(",")}},upcomingDay=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD MMMM YYYY";return Number(moment__WEBPACK_IMPORTED_MODULE_3___default()().format("D"))>=Number(moment__WEBPACK_IMPORTED_MODULE_3___default()().day(t).format("D"))?moment__WEBPACK_IMPORTED_MODULE_3___default()().day(7+t).format(o):moment__WEBPACK_IMPORTED_MODULE_3___default()().day(t).format(o)},formatNumber=t=>new Intl.NumberFormat("en-IN").format(Math.round(Number(t))),formateDate=t=>moment__WEBPACK_IMPORTED_MODULE_3___default()(t,"YYYY-MM-DD").format("DD MMM YYYY"),getPageSections=async t=>{var o;let n=await axios__WEBPACK_IMPORTED_MODULE_2___default().get(_api__WEBPACK_IMPORTED_MODULE_6__.yB,{params:{page_url:t}}),a=[];await axios__WEBPACK_IMPORTED_MODULE_2___default().all(null===(o=n.data.label_wise_section)||void 0===o?void 0:o.map(t=>{let{filter_label:o,section_heading:n,order_no:i,display_filter_button:r}=t;return axios__WEBPACK_IMPORTED_MODULE_2___default().get(_api__WEBPACK_IMPORTED_MODULE_6__.oG,{params:{tags:o}}).then(t=>{a.push({label:n,order_no:i,display_filter_button:r,products:t.data.products,mainTag:o})})}));let i=n.data;i.label_wise_section=a;let r=[],c=(t,o)=>t.order_no>o.order_no?1:t.order_no<o.order_no?-1:0;return!function(){var t,o,n;null===(t=i.label_wise_section)||void 0===t||t.forEach(t=>r.push({...t,type:"label_wise_section"})),null===(o=i.tags_section)||void 0===o||o.forEach(t=>r.push({...t,type:"tags_section"})),null===(n=i.page_opener)||void 0===n||n.forEach(t=>r.push({...t,type:"page_opener"})),r.sort(c)}(),r},fetchBreadcrumbByLocationId=async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label2";try{let n=await axios__WEBPACK_IMPORTED_MODULE_2___default().get(_api__WEBPACK_IMPORTED_MODULE_6__.qP,{params:{location:t,label:o}});return n.data.breadcrumb}catch(t){return""}},updateKey=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"KY-0";return t.split("-")[0]+"-"+(Number(t.split("-")[1])+1)},generateUniqueFileName=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(t.split(".")[0],"-").concat(new Date().getTime(),".").concat(t.split(".")[t.split(".").length-1])},withSession=t=>o=>{let{data:n,status:a}=(0,next_auth_react__WEBPACK_IMPORTED_MODULE_5__.useSession)();if(t.prototype.render)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(t,{session:n,status:a,...o});throw Error("You passed a function component, `withSession` is not needed.\nYou can `useSession` directly in your component.")},withWindowSize=t=>o=>{let{width:n,height:a}=(0,_hooks_useWindowSize__WEBPACK_IMPORTED_MODULE_1__.Z)();if(t.prototype.render)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(t,{windowWidth:n,...o})},getPageConfig=async t=>{try{let o=await axios__WEBPACK_IMPORTED_MODULE_2___default().get(_api__WEBPACK_IMPORTED_MODULE_6__.Fj,{params:{page_url:t}});return o.data[0]||null}catch(t){console.error(t)}},getLocationTypeById=t=>{if(!t)throw"Invalid Location ID";return({L1:"country",L2:"state",L3:"city",L3:"locality"})["".concat(t.split("-")[0])]};function format_Phone_No(t){if(!t)return null;let o=t.includes(")")?t.split(")")[1]:t,n=t.includes(")")?t.split(")")[1].split("(")[1]:"";return"".concat(n).concat(o)}function setVisitedCookie(t,o){if(!(t&&o))return;let n=js_cookie__WEBPACK_IMPORTED_MODULE_4__.Z.get("visited".concat(t)),a=Math.floor(Date.now()/36e5),i=n?n.split(","):[],r=new RegExp("".concat(o,"#")),c=i.findIndex(t=>t.match(r));-1!==c&&i.splice(c,1),i.unshift("".concat(o,"#").concat(a)),n=i.join(","),js_cookie__WEBPACK_IMPORTED_MODULE_4__.Z.set("visited".concat(t),n,{expires:365})}async function getVisitedProducts(t){if(!t)return null;let o=t?t.split(","):[];return(await Promise.allSettled(o.map(t=>axios__WEBPACK_IMPORTED_MODULE_2___default().get("".concat(_api__WEBPACK_IMPORTED_MODULE_6__.oG,"?id=").concat(t.split("#")[0]))))).map(t=>{var o,n;return null===(n=t.value)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.Products[0]}).filter(t=>t)}async function requestLocationForNearbyProducts(){let t=await navigator.permissions.query({name:"geolocation"});return"prompt"===t.state&&alert("To help you find exciting nearby adventures, we need access to your location. Please allow location access in the next prompt."),new Promise((t,o)=>{navigator.geolocation.getCurrentPosition(t,o,{enableHighAccuracy:!0})})}let getProductsByLocationCoordinates=async(t,o)=>{var n,a,i,r,c,l,d,u,s;let m,{latitude:p,longitude:v}=t,h=await axios__WEBPACK_IMPORTED_MODULE_2___default().post("".concat(_api__WEBPACK_IMPORTED_MODULE_6__._n,"/destination/calculate-distance/"),{latitude:p,longitude:v,radius:o}),f=null===(i=h)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:null===(n=a.sort((t,o)=>Number(t.distance.replace(" km",""))-Number(o.distance.replace(" km",""))))||void 0===n?void 0:n.map(t=>t.l3_Id),y=null===(l=h)||void 0===l?void 0:null===(c=l.data)||void 0===c?void 0:null===(r=c.sort((t,o)=>Number(t.distance.replace(" km",""))-Number(o.distance.replace(" km",""))))||void 0===r?void 0:r.map(t=>t.cityLocation);return(null===(d=f)||void 0===d?void 0:d.length)&&(m=await axios__WEBPACK_IMPORTED_MODULE_2___default().get("".concat(_api__WEBPACK_IMPORTED_MODULE_6__._n,"/api/near-by-adventures/"),{params:{location:f.toString()}})),(null===(s=m)||void 0===s?void 0:null===(u=s.data)||void 0===u?void 0:u.sort((t,o)=>y.indexOf(t.city)-y.indexOf(o.city)))||null},getUserLocationByIp=async()=>{try{let{data:{ip:t}}=await axios__WEBPACK_IMPORTED_MODULE_2___default().get("https://api.ipify.org/?format=json");if(t){let{data:{latitude:o,longitude:n}}=await axios__WEBPACK_IMPORTED_MODULE_2___default().get("https://ipapi.co/".concat(t,"/json"));return{latitude:o,longitude:n}}}catch(t){}return null};async function getNearbyProducts(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,o=null;try{let t=await requestLocationForNearbyProducts();o={latitude:t.coords.latitude,longitude:t.coords.longitude}}catch(t){}if(o||(o=await getUserLocationByIp()),o)return getProductsByLocationCoordinates(o,t)}function msgBody_from_Template(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];return"*Universal Adventure Booking*\nBooking ID: *".concat(o[0],"*\n\nProduct:\n*").concat(o[1],"*\nVariant: \n*").concat(o[2],"*\n\nService Date: *").concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(o[3]).format("DD MMM YYYY"),"*\n\n*Guest Name*: ").concat(o[4],"\n*Total Guest*: ").concat(o[5],"\n*Phone No*: ").concat(o[6],"\n\nCollection from customer: *").concat(o[8],"*\n\nBooking Date: *").concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(o[9]).format("DD MMM YYYY"),"*\n\n").concat(o[10]?"_Other Notes_: _".concat(o[10],"_"):"","\n")}function findRoomCombinations(t){let o,n,a,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!t)return;r<2&&(r=2),i=0;let c=[[o=0,n=Math.floor(t/2),a=Math.floor(t%2),i]];for(let l=0;l<r-2;l++){i=Math.floor(t/(2+(o=l+1)));for(let r=i;r>0;r--){let l=t-Math.floor((i=r)*(2+o));n=Math.floor(l/2),a=Math.floor(l%2),c.push([o,n,a,i])}}return c}function applyAccomodationPrefrence(t,o,n){var a,i;if(!t&&!o)return{price:0,costPrice:0};let r=null===(a=t.hotel)||void 0===a?void 0:a.map(t=>t.rooms).map(t=>t.split(","));if(!r[0])return{price:0,costPrice:0};let c=0,l=0,d=0,u=1,s=0;for(;d<o.length;){let a=o[d],m=(a=a.filter(o=>{var n,a;return o.accommodation_id.category==(null===(n=t.hotel[s])||void 0===n?void 0:n.hotelType)&&o.accommodation_id.tour_category==(null===(a=t.hotel[s])||void 0===a?void 0:a.hotelType2)}).sort((t,o)=>t.cp_double-o.cp_double)).find(o=>{var n;return o.room_type==(null===(n=t.hotel[s])||void 0===n?void 0:n.roomType)})||a[0],p=(100+(m.accommodation_id.percentage||10))/100;c+=(m?m["".concat(t.meal,"_single")]:0)*Number(r[s][2])*p,l+=(m?m["".concat(t.meal,"_single")]:0)*Number(r[s][2]);let v=m?m["".concat(t.meal,"_double")]:0;c+=v*Number(r[s][1])*p,l+=v*Number(r[s][1]),c+=((m?m["".concat(t.meal,"_triple")]:0)*Number(r[s][0])+v)*Number(r[s][3])*p,l+=((m?m["".concat(t.meal,"_triple")]:0)*Number(r[s][0])+v)*Number(r[s][3]);let h=n.filter(t=>"btw5-11"===t).length,f=n.filter(t=>"gt11"===t).length;c+=m["".concat(t.meal,"_triple")]*f*p,l+=m["".concat(t.meal,"_triple")]*f,c+=m["".concat(t.meal,"_triple")]*(_constants__WEBPACK_IMPORTED_MODULE_7__.DA/100)*h*p,l+=m["".concat(t.meal,"_triple")]*(_constants__WEBPACK_IMPORTED_MODULE_7__.DA/100)*h,u<(null===(i=t.hotel[s])||void 0===i?void 0:i.days)?(u++,d++):(u=1,d++,s++)}return{price:c,costPrice:l}}function generateDefaultPrefrence(t,o){if(!t)return;let n=[],a=t.length,i=t.map(t=>t.sort((t,o)=>t.cp_double-o.cp_double)[0]).reduce((t,o)=>{var n,a,i,r,c;return(null===(i=t)||void 0===i?void 0:null===(a=i[t.length-1])||void 0===a?void 0:null===(n=a.accommodation_id)||void 0===n?void 0:n.location_id)===(null===(c=o)||void 0===c?void 0:null===(r=c.accommodation_id)||void 0===r?void 0:r.location_id)?t:t.concat(o)},[]),{hotelOptions:r}=generateHotelOptions(t);return i.forEach((t,i)=>{var c,l,d,u,s,m,p,v,h,f,y,g,_,w;n.push({hotelType:null===(c=t.accommodation_id)||void 0===c?void 0:c.category,hotelType2:null===(l=t.accommodation_id)||void 0===l?void 0:l.tour_category,roomType:null===(u=t.accomodation_room)||void 0===u?void 0:null===(d=u[0])||void 0===d?void 0:d.room_type,hotel:null===(s=t.accommodation_id)||void 0===s?void 0:s.accommodation_name,rooms:null===(p=findRoomCombinations(o,t.accomodation_room?.[0]?.max_sharing))||void 0===p?void 0:null===(m=p[0])||void 0===m?void 0:m.toString(),days:(null===(v=r[i+1])||void 0===v?void 0:v.day)?(null===(h=r[i+1])||void 0===h?void 0:h.day)-(null===(f=r[i])||void 0===f?void 0:f.day):a-(null===(y=r[i])||void 0===y?void 0:y.day)+1,day_of_trip:(null===(g=r[i+1])||void 0===g?void 0:g.day)?(null===(_=r[i+1])||void 0===_?void 0:_.day)-(null===(w=r[i])||void 0===w?void 0:w.day)>1?"".concat(r[i].day,"-").concat(r[i].day+(r[i+1].day-r[i].day-1)):"".concat(r[i].day):r[i].day===a?"".concat(r[i].day):"".concat(r[i].day,"-").concat(a)})}),{meal:"cp",hotel:n}}function generateHotelOptions(t){var o;let n=[],a=[];if(null===(o=t)||void 0===o?void 0:o[0]){let o=0;t.forEach((i,r)=>{let c={categories:[],roomTypes:[]};if(r>0&&t[r-1][0].accommodation_id.location_id==i[0].accommodation_id.location_id){i.forEach(t=>{n[n.length-1].categories.includes(t.accommodation_id.category)||n[n.length-1].categories.push(t.accommodation_id.category),n[n.length-1].roomTypes.includes("".concat(t.room_type,"--").concat(t.accommodation_id.category))||n[n.length-1].roomTypes.push("".concat(t.room_type,"--").concat(t.accommodation_id.category))}),o++;return}o=0,i.forEach(t=>{c.categories.includes(t.accommodation_id.category)||c.categories.push(t.accommodation_id.category),c.roomTypes.includes("".concat(t.room_type,"--").concat(t.accommodation_id.category))||c.roomTypes.push("".concat(t.room_type,"--").concat(t.accommodation_id.category)),c.day=r+1}),n.push(c),a.push(c.categories.includes("3 Star Hotel")?"3 Star Hotel":c.categories[0]||"")})}return{hotelOptions:n,hotelCategory:a}}function formatAccomPrefrenceToString(t){var o,n,a,i;let r=null===(o=t)||void 0===o?void 0:o.hotel.map(t=>{var o;return(null===(o=t)||void 0===o?void 0:o.rooms.split(",").map(t=>Number(t)))||[]});return"Meal: ".concat(null===(n=t)||void 0===n?void 0:n.meal.toUpperCase(),", \n").concat(null===(i=t)||void 0===i?void 0:null===(a=i.hotel)||void 0===a?void 0:a.map((t,o)=>"HotelName : ".concat(t.hotel," \nHotelCategory: ").concat(t.hotelType," \nRoomType : ").concat(t.roomType," \nDays : ").concat(t.days," day\nRoomCombination : ").concat(r[o][0]?"".concat(r[o][3],"\xd7(Double + ").concat(r[o][0],"Extra)"):""," ").concat(r[o][1]?"".concat(r[o][1],"Double"):""," ").concat(r[o][2]?"".concat(r[o][2],"Single"):"")).join(";\n\n"))}let popupCenter=(t,o)=>{var n,a,i,r,c,l,d;let u=null!==(a=window.screenLeft)&&void 0!==a?a:window.screenX,s=null!==(i=window.screenTop)&&void 0!==i?i:window.screenY,m=null!==(c=null!==(r=window.innerWidth)&&void 0!==r?r:document.documentElement.clientWidth)&&void 0!==c?c:screen.width,p=null!==(d=null!==(l=window.innerHeight)&&void 0!==l?l:document.documentElement.clientHeight)&&void 0!==d?d:screen.height,v=m/window.screen.availWidth,h=(m-500)/2/v+u,f=(p-550)/2/v+s,y=window.open(t,o,"width=".concat(500/v,",height=").concat(550/v,",top=").concat(f,",left=").concat(h));null===(n=y)||void 0===n||n.focus()},isValidURL=t=>{try{let o=new URL(t);if(o)return!0}catch(t){return!1}},isObjectEmpty=t=>{for(var o in t)if(t.hasOwnProperty(o))return!1;return!0},toggleValueInArray=(t,o)=>{let n=new Set(t);return n.has(o)?n.delete(o):n.add(o),Array.from(n)},generateRandomNumber=(t,o)=>Math.floor(Math.random()*(o-t+1)+t),removeNullOrUndefinedProperties=t=>Object.entries(t).reduce((t,o)=>{let[n,a]=o;return null!=a&&(t[n]=a),t},{}),generateUniqueId=()=>{let t=new Date().getTime(),o=1e17*Math.random();return"".concat(t,"-").concat(o)},parseJsonString=t=>{try{return JSON.parse(t)}catch(t){return null}}}}]);